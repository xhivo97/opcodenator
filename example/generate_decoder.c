#define OPCODENATOR_IMPLEMENTATION
#include "../opcodenator.h"

OpcodeData simple_decode_opcodes[] = {
  OPCODE("ADC",          "000111rdddddrrrr0000000000000000"),
  OPCODE("ADD",          "000011rdddddrrrr0000000000000000"),
  OPCODE("ADIW",         "10010110KKddKKKK0000000000000000"),
  OPCODE("AND",          "001000rdddddrrrr0000000000000000"),
  OPCODE("ANDI",         "0111KKKKddddKKKK0000000000000000"),
  OPCODE("ASR",          "1001010ddddd01010000000000000000"),
  OPCODE("BCLR",         "100101001sss10000000000000000000"),
  OPCODE("BLD",          "1111100ddddd0bbb0000000000000000"),
  OPCODE("BRBC",         "111101kkkkkkksss0000000000000000"),
  OPCODE("BRBS",         "111100kkkkkkksss0000000000000000"),
  OPCODE("BREAK",        "10010101100110000000000000000000"),
  OPCODE("BSET",         "100101000sss10000000000000000000"),
  OPCODE("BST",          "1111101ddddd0bbb0000000000000000"),
  OPCODE("CALL",         "1001010kkkkk111kkkkkkkkkkkkkkkkk"),
  OPCODE("COM",          "1001010ddddd00000000000000000000"),
  OPCODE("CP",           "000101rdddddrrrr0000000000000000"),
  OPCODE("CPC",          "000001rdddddrrrr0000000000000000"),
  OPCODE("CPI",          "0011KKKKddddKKKK0000000000000000"),
  OPCODE("CPSE",         "000100rdddddrrrr0000000000000000"),
  OPCODE("DEC",          "1001010ddddd10100000000000000000"),
  OPCODE("DES",          "10010100KKKK10110000000000000000"),
  OPCODE("EICALL",       "10010101000110010000000000000000"),
  OPCODE("EIJMP",        "10010100000110010000000000000000"),
  OPCODE("EOR",          "001001rdddddrrrr0000000000000000"),
  OPCODE("FMUL",         "000000110ddd1rrr0000000000000000"),
  OPCODE("FMULS",        "000000111ddd0rrr0000000000000000"),
  OPCODE("FMULSU",       "000000111ddd1rrr0000000000000000"),
  OPCODE("ICALL",        "10010101000010010000000000000000"),
  OPCODE("IJMP",         "10010100000010010000000000000000"),
  OPCODE("IN",           "10110AAdddddAAAA0000000000000000"),
  OPCODE("INC",          "1001010ddddd00110000000000000000"),
  OPCODE("JMP",          "1001010kkkkk110kkkkkkkkkkkkkkkkk"),
  OPCODE("LAC",          "1001001rrrrr01100000000000000000"),
  OPCODE("LAS",          "1001001rrrrr01010000000000000000"),
  OPCODE("LAT",          "1001001rrrrr01110000000000000000"),
  OPCODE("INDIR_X",      "100100Fddddd11000000000000000000"),
  OPCODE("INDIR_DP_D16", "10q0qqFdddddYqqq0000000000000000"),
  OPCODE("INDIR_X_INC",  "100100Fddddd11010000000000000000"),
  OPCODE("INDIR_X_DEC",  "100100Fddddd11100000000000000000"),
  OPCODE("INDIR_Y_INC",  "100100Fddddd10010000000000000000"),
  OPCODE("INDIR_Y_DEC",  "100100Fddddd10100000000000000000"),
  OPCODE("INDIR_Z_INC",  "100100Fddddd00010000000000000000"),
  OPCODE("INDIR_Z_DEC",  "100100Fddddd00100000000000000000"),
  OPCODE("LDI",          "1110KKKKddddKKKK0000000000000000"),
  OPCODE("LDS32",        "1001000ddddd0000kkkkkkkkkkkkkkkk"),
  OPCODE("LPM_R0",       "10010101110e10000000000000000000"),
  OPCODE("LPM",          "1001000ddddd01ei0000000000000000"),
  OPCODE("LSR",          "1001010ddddd01100000000000000000"),
  OPCODE("MOV",          "001011rdddddrrrr0000000000000000"),
  OPCODE("MOVW",         "00000001ddddrrrr0000000000000000"),
  OPCODE("MUL",          "100111rdddddrrrr0000000000000000"),
  OPCODE("MULS",         "00000010ddddrrrr0000000000000000"),
  OPCODE("MULSU",        "000000110ddd0rrr0000000000000000"),
  OPCODE("NEG",          "1001010ddddd00010000000000000000"),
  OPCODE("NOP",          "00000000000000000000000000000000"),
  OPCODE("OR",           "001010rdddddrrrr0000000000000000"),
  OPCODE("ORI",          "0110KKKKddddKKKK0000000000000000"),
  OPCODE("OUT",          "10111AArrrrrAAAA0000000000000000"),
  OPCODE("POP",          "1001000ddddd11110000000000000000"),
  OPCODE("PUSH",         "1001001ddddd11110000000000000000"),
  OPCODE("RCALL",        "1101kkkkkkkkkkkk0000000000000000"),
  OPCODE("RET",          "10010101000010000000000000000000"),
  OPCODE("RETI",         "10010101000110000000000000000000"),
  OPCODE("RJMP",         "1100kkkkkkkkkkkk0000000000000000"),
  OPCODE("ROR",          "1001010ddddd01110000000000000000"),
  OPCODE("SBC",          "000010rdddddrrrr0000000000000000"),
  OPCODE("SBCI",         "0100KKKKddddKKKK0000000000000000"),
  OPCODE("SBI_CBI",      "100110F0AAAAAbbb0000000000000000"),
  OPCODE("SBIC_SBIS",    "100110F1AAAAAbbb0000000000000000"),
  OPCODE("SBIW",         "10010111KKddKKKK0000000000000000"),
  OPCODE("SBRC_SBRS",    "111111Frrrrr0bbb0000000000000000"),
  OPCODE("SLEEP",        "10010101100010000000000000000000"),
  OPCODE("SPM",          "10010101111i10000000000000000000"),
  OPCODE("STS32",        "1001001ddddd0000kkkkkkkkkkkkkkkk"),
  OPCODE("SUB",          "000110rdddddrrrr0000000000000000"),
  OPCODE("SUBI",         "0101KKKKddddKKKK0000000000000000"),
  OPCODE("SWAP",         "1001010ddddd00100000000000000000"),
  OPCODE("WDR",          "10010101101010000000000000000000"),
  OPCODE("XCH",          "1001001rrrrr01000000000000000000"),
};
static const uint16_t size = sizeof(simple_decode_opcodes) /
  sizeof(simple_decode_opcodes[0]);

int main(void) {
  OpcodenatorData opcodenator = init_opcodenator(simple_decode_opcodes,
      size, "  ", "op_", "opcode_decode");
  
  print_includes();
  printf("\n");
  print_enum_declaration(opcodenator);
  printf("\n");
  print_struct_declaration(opcodenator);
  printf("\n");
  print_function_declarations(opcodenator);
  printf("\n");
  print_empty_function_definitions(opcodenator);
  printf("\n");
  print_array_definition(opcodenator);
  printf("\n");
  print_decoder_function(opcodenator);
  return 0;
}
